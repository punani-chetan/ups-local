<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UPS</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
  <link rel="stylesheet" type="text/css" href="style.css" />
  <!-- Option 1: Include in HTML -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
  <script type="text/JavaScript" src=" https://MomentJS.com/downloads/moment.js"></script>
</head>

<body>
  <div class="container-fluid h-100">
    <div class="row justify-content-center h-100">
      <div class="col">
        <div class="h-100 d-flex flex-column">
          <div class="row justify-content-center">
            <nav class="navbar">
              <div class="w-100">
                <div class="mx-5 text-white d-flex flex-row">
                  <h3><b>HITACHI</b></h3>
                  <div class="d-flex justify-content-center align-items-center w-100">
                    <span class="mx-4 active-tab-border"><a href="index.html" class="header-main-menu"></a>
                      Home</a></span>
                    <span class="mx-4"><a href="configuration.html" class="header-main-menu">Configuration</a></span>
                    <span class="mx-4"><a href="https://www.hitachi-hirel.com/contact-us"
                        class="header-main-menu">Contact</a></span>
                  </div>
                </div>
              </div>
            </nav>
          </div>
          <div class="row justify-content-center flex-grow-1 main-bgcolor">
            <div class="w-100">
              <div class="mx-5">
                <div class="mt-4 d-flex justify-content-between">
                  <h4><b>UPS 1</b></h4>
                  <div><b>Date <span id="ups_date"></span> | Time <span id="ups_time"></span> </b></div>
                </div>
                <div class="mt-3">
                  <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                      <button class="nav-link active" id="nav-status-tab" data-bs-toggle="tab"
                        data-bs-target="#nav-status" type="button" role="tab" aria-controls="nav-status"
                        aria-selected="true">
                        <b>
                          <i class="bi bi-check2-circle"></i><span class="m-2">Status</span>
                        </b>
                      </button>
                      <button class="nav-link" id="nav-metering-tab" data-bs-toggle="tab" data-bs-target="#nav-metering"
                        type="button" role="tab" aria-controls="nav-metering" aria-selected="false">
                        <b>
                          <i class="bi bi-speedometer2"></i><span class="m-2">Metering</span>
                        </b>
                      </button>
                      <button class="nav-link" id="nav-eventlog-tab" data-bs-toggle="tab" data-bs-target="#nav-eventlog"
                        type="button" role="tab" aria-controls="nav-eventlog" aria-selected="false">
                        <b>
                          <i class="bi bi-calendar-event"></i><span class="m-2">EventLog</span>
                        </b>
                      </button>
                      <button class="nav-link" id="nav-datalog-tab" data-bs-toggle="tab" data-bs-target="#nav-datalog"
                        type="button" role="tab" aria-controls="nav-datalog" aria-selected="false">
                        <b>
                          <i class="bi bi-clipboard-data"></i><span class="m-2">DataLog</span>
                        </b>
                      </button>
                    </div>
                  </nav>
                  <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-status" role="tabpanel"
                      aria-labelledby="nav-status-tab">
                      <div class="mt-3">
                        <!-- <include src="status.html"></include> -->

                        <div class="row">
                          <div class="col p-3">
                            <div class="card shadow rounded">
                              <div class="card-body">
                                <table class="table table-borderless">
                                  <thead>
                                    <tr class="mt-5">
                                      <th scope="col" rowspan="2" class="align-middle">
                                        <img src="asset/blank_img.jpg" class="card-img-top img-setup" alt="Img" />
                                      </th>
                                      <th scope="col" colspan="3">Model Name</th>
                                    </tr>
                                    <tr>
                                      <th class="border-bottom" colspan="3">
                                        <h5>i4ET (SINGLE PHASE UPS)</h5>
                                      </th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr>
                                      <th scope="row"></th>
                                      <td>
                                        <div id="id1">
                                          <div class="d-flex flex-column">
                                            <span><b>Bypass Input</b></span>
                                            <div class="d-flex">
                                              <div class="blinking-red"></div>
                                              <span class="status-card-text-space">
                                                Out of Range
                                              </span>
                                            </div>
                                          </div>
                                        </div>


                                        <div id="id2">
                                          <div class="d-flex flex-column">
                                            <span><b>Main's Supply</b></span>
                                            <div class="d-flex">
                                              <div class="dot-red"></div>
                                              <span class="status-card-text-space"> Absent </span>
                                            </div>
                                          </div>
                                        </div>
                                      </td>
                                      <td>
                                        <div class="d-flex flex-column">
                                          <span><b>Main's Supply</b></span>
                                          <div class="d-flex">
                                            <div class="dot-red"></div>
                                            <span class="status-card-text-space"> Absent </span>
                                          </div>
                                        </div>
                                      </td>
                                      <td>
                                        <div class="d-flex flex-column">
                                          <span><b>Rectifier Operation</b></span>
                                          <div class="d-flex">
                                            <div class="dot-green"></div>
                                            <span class="status-card-text-space">
                                              Within range
                                            </span>
                                          </div>
                                        </div>
                                      </td>
                                    </tr>
                                    <tr>
                                      <th scope="row"></th>
                                      <td>
                                        <div class="d-flex flex-column">
                                          <span><b>Booster Operation(Battery Discharging)</b></span>
                                          <div class="d-flex">
                                            <div class="blinking-green"></div>
                                            <span class="status-card-text-space">
                                              Ok (Within Limit)
                                            </span>
                                          </div>
                                        </div>
                                      </td>
                                      <td>
                                        <div class="d-flex flex-column">
                                          <span><b>Charger Operation (Battery Charging)</b>
                                          </span>
                                          <div class="d-flex">
                                            <div class="dot-yellow"></div>
                                            <span class="status-card-text-space">
                                              Ok (Within Limit)
                                            </span>
                                          </div>
                                        </div>
                                      </td>
                                      <td>
                                        <div class="d-flex flex-column">
                                          <span><b>Inverter Operation</b></span>
                                          <div class="d-flex">
                                            <div class="blinking-yellow"></div>
                                            <span class="status-card-text-space">
                                              Ok (Within Limit)
                                            </span>
                                          </div>
                                        </div>
                                      </td>
                                    </tr>
                                    <tr>
                                      <th scope="row"></th>
                                      <td>
                                        <div class="d-flex flex-column">
                                          <span><b>Load on Inverter</b></span>
                                          <div class="d-flex">
                                            <div class="dot-gray"></div>
                                            <span class="status-card-text-space"> Absent </span>
                                          </div>
                                        </div>
                                      </td>
                                      <td>
                                        <div class="d-flex flex-column">
                                          <span><b>Load on Bypass</b></span>
                                          <div class="d-flex">
                                            <div class="blinking"></div>
                                            <span class="status-card-text-space">
                                              Ok (Within Limit)
                                            </span>
                                          </div>
                                        </div>
                                      </td>
                                      <td>
                                        <div class="d-flex flex-column">
                                          <span><b>Synchronization</b></span>
                                          <div class="d-flex">
                                            <div class="blinking"></div>
                                            <span class="status-card-text-space">
                                              Ok (Within Limit)
                                            </span>
                                          </div>
                                        </div>
                                      </td>
                                    </tr>
                                    <tr>
                                      <th scope="row"></th>
                                      <td>
                                        <div class="d-flex flex-column">
                                          <span><b>Common Alarm Indication</b></span>
                                          <div class="d-flex">
                                            <div class="blinking"></div>
                                            <span class="status-card-text-space">
                                              Ok (Within Limit)
                                            </span>
                                          </div>
                                        </div>
                                      </td>
                                      <td>
                                        <div class="d-flex flex-column">
                                          <span><b>Battery MCCB Status </b></span>
                                          <div class="d-flex">
                                            <div class="blinking"></div>
                                            <span class="status-card-text-space">
                                              Ok (Within Limit)
                                            </span>
                                          </div>
                                        </div>
                                      </td>
                                      <!-- <td>
                                            <div class="d-flex flex-column">
                                              <span>Main's Supply</span>
                                              <div class="d-flex">
                                                <div class="blinking"></div>
                                                <span class="status-card-text-space">
                                                  Ok (Within Limit)
                                                </span>
                                              </div>
                                            </div>
                                          </td> -->
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                    <div class="tab-pane fade" id="nav-metering" role="tabpanel" aria-labelledby="nav-metering-tab">
                      <div class="containr">
                        <!-- <include src="metering.html"></include> -->
                        <iframe src="metering.html" name="metering" title="Metering" width="100%" style="height: 115vh;"
                          scrolling="no" allowfullscreen></iframe>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="nav-eventlog" role="tabpanel" aria-labelledby="nav-eventlog-tab">
                      <include src="eventlog.html"></include>
                    </div>
                    <div class="tab-pane fade" id="nav-datalog" role="tabpanel" aria-labelledby="nav-datalog-tab">
                      <include src="datalog.html"></include>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>


<script type="text/javascript" src="./ups.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<script>
  // Add html file dynamic --- start
  let includes = document.getElementsByTagName('include');
  for (var i = 0; i < includes.length; i++) {
    let include = includes[i];
    load_file(includes[i].attributes.src.value, function (text) {
      include.insertAdjacentHTML('afterend', text);
      include.remove();
    });
  }
  function load_file(filename, callback) {
    fetch(filename).then(response => response.text()).then(text => callback(text));
  }
  // Add html file dynamic --- end

  // Show/Hide element in status
  document.getElementById("id2").style.display = "none";

  // Date & Time --- start
  var today = new Date();
  var dd = today.getDate();
  var mm = today.getMonth() + 1;
  var yyyy = today.getFullYear();
  if (dd < 10) {
    dd = '0' + dd;
  }
  if (mm < 10) {
    mm = '0' + mm;
  }
  var curr_date = dd + '/' + mm + '/' + yyyy;

  setInterval(function () {
    const curr_time = new Date().toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/, "$1");
    document.getElementById('ups_time').innerHTML = curr_time;
  }, 1000);
  document.getElementById('ups_date').innerHTML = curr_date;
  // Date & Time --- end


  // const url = 'ws://ups-gateway:80/ws'
  const url = 'ws://ups-gateway:80/ws'
  var ws = new WebSocket(url);

  ws.onopen = function () {
    ws.send('Metering WS Started');
    console.log("Web socket is connected in index.html");
  };
</script>